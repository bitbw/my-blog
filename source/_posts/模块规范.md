---
layout: ecmascript
title: 模块规范
date: 2019-11-30 18:13:47
tags: es6
categories: es6
---

### 导出 export

如果模块只有一个成员，建议 `export default`

```javascript
export default 数字|字符串|数组|对象|函数。。。任何数据
```

> 注意：
>
> 1.export default 只能有一次，重复会报错
>
> 2.使用时不要在后面做声明 var 、 let 、const 、直接写需要导出的对象或其他， 也可以先声明变量或常量， 再直接导出

如果一个模块有多个成员

```javascript
export default {
  成员1: 值,
  成员2: 值2,
  成员3...
}
```

> 如果成员之间没有依赖关系，不是用于某个数据的完整整体，不推荐，你可能只使用其中某个成员，而必须加载整体数据对象
>
> 除非这个对象是一个完整的整体，例如 Vue 组件的实例选项对象，这样是可以的

ECMAScript 6 提供了一种更优化的方案，当多个成员没有具体的依赖关系的时候，我们推荐使用 `export` 语法进行导出，因为它支持**按需加载**，就是说你用什么就只加载什么，其它多余的都不要，这样有利于程序的执行效率。

```javascript
export const a = 1;
export const b = 2;
```

也可以集中按需导出多个成员

```javascript
const a = 1;
const b = 2;
const c = 3;

// 语法就是这样，后面的成员也不是对象的简写方式， {} 中的成员必须当前模块能够访问的成员名称
export {
	// 不是 a: a 的简写，必须 a
	// a 必须是当前模块中的某个成员
	a,
	b,
	c,
};

// 以上写法等价于
// export const a = 1
// export const b = 2
// export const c = 3
```

有时候模块中有很多成员的时候，我们会 `export default` 和 `export` 一起使用。

我们把最常用的使用 `export default` 导出，把不太常用的使用 `export` 导出（用于按需加载）。

```javascript
export const a = 1;
export const b = 2;

export default function (x, y) {
	return x + y;
}
```

### 导入 import

加载 `export default` 成员

```javascript
import xxx from "模块路径";
```

按需加载 `export` 成员

```javascript
import { 成员1 as 别名, 成员2... } from '模块路径'
```

混着加载 `export default` 和 `export` 成员

```javascript
import xxx, { 成员1, 成员2... } from '模块路径'
```

一次性加载所有成员

```javascript
import * as xxx from "模块路径";
```

> 包括 `export default` 和 `export` 所有成员
>
> `export default` 就是一个名字叫 `default` 的成员，知道即可，不推荐这样来使用 `xxx.default`

下面是一个导出的例子：

```js
export default 123;

// export default 只能有1次，多次就报错，语法不允许
// export default 'hello'

// 如果你想导出多个成员，可以放到1个对象中
// export default {
//   a: 1,
//   b: 2
// }

// 大多数情况下我们其实只需要使用到对象中某几个成员，而不是所有
// ECMAScript 6 为了优化这一点，增加了：按需加载和导出功能
// 使用谁，加载谁，更有利于性能优化，打包优化
// 按需导出可以导出任意个成员
// 注意：export 成员必须有名字
export const a = 1;
export const b = "hello";
export const c = [1, 2, 3];

// 也不能这么写
// const d = 789
// export d

// export const d = 789
// export function hello () {
//   console.log('hello')
// }

// 建议写法：
// 我们一般会把最主要的那个成员作为 export  default 导出
// 如果有其它的成员，作为 export 成员按需导出
// 没有主要的那就不用设置了，
```
